//æ–‡å­—ã®æç”»ä½ç½®
let x=300;
let y=200;

//ç§»å‹•é‡
let dx=-2;
let dy=-2;
//ç·šã‚’å¼•ãã‚¹ã‚¿ãƒ¼ãƒˆåº§æ¨™
let start_x = 0;
let start_y = 0;
//ãƒ‰ãƒ©ãƒƒã‚°ä¸­ã‹ã©ã†ã‹
let is_dragging = false;

function setup() {
  //ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚’ä½œæˆ
  createCanvas(600, 400);
  //æ–‡å­—ã®å¤§ãã•ã‚’æ±ºã‚ã‚‹
  textSize(60);
  //åº§æ¨™ãŒæŒ‡ã™ä½ç½®ã¯ãƒ†ã‚­ã‚¹ãƒˆã®ä¸­å¿ƒ
  textAlign(CENTER, CENTER);
}

function draw() {
  //èƒŒæ™¯ã‚’å¡—ã‚Šã¤ã¶ã™
  background(0,0,0);
  //æ‘©æ“¦ã§æ­¢ã¾ã‚‹ã‚ˆã†ã«ã™ã‚‹
  dx*=0.99;
  dy*=0.99;
  //ä½ç½®æƒ…å ±ã§ã‚ã‚‹xã¨yã‚’1ãšã¤å¤‰ãˆã‚‹
  x+=dx;
  y+=dy;
  //ç”»é¢ã®ç«¯ã§è·³ã­è¿”ã‚‹
  if(x<0 || x+30>width){
    //æ–¹å‘ã‚’é€†ã«ã™ã‚‹
    dx*=(-1);
  }
  if(y<0 || y+30>height){
    //æ–¹å‘ã‚’é€†ã«ã™ã‚‹
    dy*=(-1);
  }
  //ãƒ‰ãƒ©ãƒƒã‚°ä¸­ãªã‚‰
  if(is_dragging){
    //ç·šã®è‰²ã¯èµ¤
    stroke(255,0,0);
    //ç·šã®å¤ªã•ã¯3px
    strokeWeight(3);
    //ç·šã‚’å¼•ã
    line(start_x, start_y, mouseX, mouseY);
  }
  //ç·šã®è‰²ã¯é»’
  stroke(0,0,0);
  //å¡—ã‚Šã¤ã¶ã—ã¯ç™½
  fill(255,255,255);
  //rect(x,y,30,30);
  let emoji = "ğŸ¤–";
  text(emoji,x,y);
}

//ç”»é¢ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸ
function mousePressed(){
  //ã‚¯ãƒªãƒƒã‚¯ã—ãŸãƒã‚¦ã‚¹ä½ç½®ã‚’è¦šãˆã¦ãŠã
  start_x = mouseX;
  start_y = mouseY;
  //ãƒ‰ãƒ©ãƒƒã‚°ä¸­ã«ã™ã‚‹
  is_dragging = true;
}
//ãƒã‚¦ã‚¹ãŒé›¢ã•ã‚ŒãŸ
function mouseReleased(){
  //ãƒ‰ãƒ©ãƒƒã‚°çµ‚äº†
  is_dragging = false;
  //ç§»å‹•é‡ã‚’ãƒã‚¦ã‚¹ã‚¯ãƒªãƒƒã‚¯ä½ç½®ã‹ã‚‰é›¢ã—ãŸä½ç½®ã®å·®åˆ†ã§æ±ºã‚ã‚‹ã€‚
  //pxã§æ±ºã‚ã‚‹ã¨å¤§ãã™ãã‚‹ã®ã§ã€30ã§å‰²ã£ã¦èª¿ç¯€
  dx = (start_x-mouseX)/30;
  dy = (start_y-mouseY)/30;
}